%; whizzy chapter
% -initex iniptex -latex platex -format platex -bibtex jbibtex -fmt fmt
% 以上 whizzytex を使用する場合の設定。

% This document is distributed under the terms of GPL version 2 or
%later.
% Copyright 2006 Junichi Uekawa and others

%   Pdf作成手順
% dvipdfmx debianmeetingresume200606.dvi
%  preview (shell-command (concat "xpdf " (replace-regexp-in-string "tex$" "pdf"(buffer-file-name)) "&"))
% 画像ファイルを処理するためにはebbを利用してboundingboxを作成。
%(shell-command "cd image200606; ebb *.png")

%%ここからヘッダ開始。

\documentclass[mingoth,a4paper]{jsarticle}
\usepackage[dvipdfm]{graphicx}
\usepackage{fancybox}
\usepackage{longtable}
\usepackage{ascmac}	% 囲み (screen,itembox)
\usepackage{fancyvrb}   % 囲み Verbatim のために必要
\usepackage[dvipdfm]{hyperref}
\usepackage{url}
\usepackage[dvipdfm]{color}

%http://www.naney.org/diki/dk/hyperref.html
%日本語EUC系環境の時
\AtBeginDvi{\special{pdf:tounicode EUC-UCS2}}
%シフトJIS系環境の時
%\AtBeginDvi{\special{pdf:tounicode 90ms-RKSJ-UCS2}}

%% spacing の設定をする。外枠を減らす。
\setlength\headheight{0mm}
\setlength\topmargin{-20mm}
\setlength\headsep{0mm}
\setlength\topskip{3mm}
\setlength\maxdepth{4pt}
\setlength\columnsep{6mm}
\setlength\textheight{252mm}
\setlength\topmargin{-5mm}
\setlength\textwidth{170mm}
\setlength\oddsidemargin{-5mm}
\setlength\evensidemargin{-5mm}

% commandline環境を定義。画面入出力についてはcommandline環境
% で表記する
\newenvironment{commandline}%
{\VerbatimEnvironment
  \begin{Sbox}\begin{minipage}{15cm}\begin{fontsize}{7.3}{7.3} \begin{BVerbatim}}%
{\end{BVerbatim}\end{fontsize}\end{minipage}\end{Sbox}
  \setlength{\fboxsep}{8pt}\fbox{\TheSbox}}


%%% start of santaku
\makeatletter
\newwrite\tf@jqz
\immediate\openout\tf@jqz\jobname.jqz\relax
\makeatother
\newcounter{santakucounter}
\newcommand{\santaku}[5]{%
\addtocounter{santakucounter}{1}

\addtocontents{jqz}{\arabic{santakucounter}. #5\\}
\begin{minipage}{1\hsize}
問題\arabic{santakucounter}. 
#1\\
□ A #2\\
□ B #3\\
□ C #4
\end{minipage}
\hspace{1cm}
\\

}
%%% end of santaku

\newcommand{\emptyspace}{(\underline{\hspace{1cm}})}

\newcommand{\subsubsubsection}[1]{%
\vspace{1zw}{\bf #1}\\}


% sectionをセンタリングする
\makeatletter
  \renewcommand{\section}{\@startsection{section}{1}{\z@}%
    {\Cvs \@plus.5\Cdp \@minus.2\Cdp}% 前アキ
    {.5\Cvs \@plus.3\Cdp}% 後アキ
    {\normalfont\Huge\headfont\raggedright\centering}} % style
\makeatother

% section の代わりの環境
\newcommand{\dancersection}[2]{%
\newpage
東京エリアDebian勉強会 2006
\hrule
\vspace{0.5mm}
\hrule
%\hfill{}\includegraphics[width=3cm]{image200502/openlogo-nd.eps}\\
\hfill{}\includegraphics[width=16cm]{image2006-natsu/guruguru-sand-light.png}\\
\vspace{-5cm}
\begin{center}
\section{#1}
\end{center}
\hfill{}\colorbox{white}{#2}\hspace{3cm}\space\\
\vspace{1cm}
\hrule
\vspace{0.5mm}
\hrule
\vspace{1cm}
}

% BTSの番号を見るためのコマンド
\newcommand{\debianbug}[1]{#1\footnote{\url{http://bugs.debian.org/#1}}}

% for dancerj
\newcommand{\fgref}[1]{図\ref{#1}}
\newcommand{\tbref}[1]{表\ref{#1}}


\begin{document}

\begin{titlepage}

% 毎月変更する部分, 本文の末尾も修正することをわすれずに
\title{\includegraphics[width=7cm]{image200502/openlogo-nd.eps}\\
 第19回 東京エリア Debian 勉強会\\事前資料}
\date{2006年8月19日}
\author{Debian勉強会会場係 上川純一\thanks{Debian Project Official Developer}} 
\maketitle
\thispagestyle{empty}
\end{titlepage}

\newpage
\tableofcontents

\dancersection{Introduction To Debian 勉強会}{上川純一}

今月のDebian勉強会へようこそ。
これからDebianのあやしい世界に入るという方も、すでにどっぷりとつかってい
るという方も、月に一回Debianについて語りませんか？

目的として下記の二つを考えています。

\begin{itemize}
 \item メールではよみとれない、もしくはよみとってられないような情報を情
       報共有する場をつくる
 \item まとまっていないDebianを利用する際の情報をまとめて、ある程度の塊と
       して出してみる
\end{itemize}

また、東京にはLinuxの勉強会はたくさんありますので、Debianに限定した勉強
会にします。Linuxの基本的な利用方法などが知りたい方は、他でがんばってくださ
い。
Debianの勉強会ということで究極的には参加者全員がDebian Packageを
がりがりと作りながらスーパーハッカーになれるような姿を妄想しています。

Debianをこれからどうするという能動的な展開への土台としての空間を提供し、
情報の共有をしたい、というのが目的です。
次回は違うこと言ってるかもしれませんが、御容赦を。

\subsection{講師紹介}

\begin{itemize}
 \item{上川純一} 宴会の幹事です。
\end{itemize}

\subsection{事前課題紹介}

今回の事前課題は
「XXX」
というタイトルで200-800文字程度の文章を書いてください。
というものでした。
その課題に対して下記の内容を提出いただきました。

\subsubsection{}

\subsubsection{上川}


%%% trivia quiz
\dancersection{Debian Weekly News trivia quiz}{上川純一}

ところで、Debian Weekly News (DWN)は読んでいますか？
Debian 界隈でおきていることについて書いているDebian Weekly News.
毎回読んでいるといろいろと分かって来ますが、一人で読んでいても、解説が少
ないので、
意味がわからないところもあるかも知れません。みんなでDWNを読んでみましょう。

漫然と読むだけではおもしろくないので、DWNの記事から出題した以下の質問にこたえてみてください。
後で内容は解説します。

\subsection{2006年25号}
\url{http://www.debian.org/News/weekly/2006//}
にある6月20日版です。

\santaku
{Isaac Clerencia さんは、スペイン
のサラゴサ市当局が、6 ヶ所ある場所に Debian ベースのシンク
ライアントを設置したと報告しました。その場所とはどこでしょうか}
{ラーメン屋}
{コンビニエンスストア}
{老人ホーム}
{C}

\santaku
{Yaroslav Halchenkoさんが Debian Packge 内のあるファイルが圧縮されていて、読むことが出来ないと気がつきました。
そのファイルとは何でしょうか。}
{Word ファイル}
{PDF ファイル}
{SREC ファイル}
{B}

\subsection{2006年26号}
\url{http://www.debian.org/News/weekly/2006//}
にある6月27日版です。

\santaku
{9月にイタリアのある都市でDebian コミュニティカンファレンスがおこなわれます。
そのある都市とはどこでしょう。}
{ベニス}
{デセンツァーノ・デル・ガルーダ}
{カリブ島}
{A}

\santaku
{最近セキュリティチームのメンバーが増えました。それはだれでしょうか。}
{Steve Kemp}
{Hidehazu Koiwa}
{Andreas Barth}
{A}

\subsection{2006年27号}
\url{http://www.debian.org/News/weekly/2006/}
にある7月4日版です。
\santaku
{最近また新しいOSにDebianを移植している噂があるらしい。それはどのOSか？}
{Plan9}
{Minix3}
{Mona}
{B}

\santaku
{Paul Wise さんがあたらしいグループを作成しました。それはどのグループか？}
{debian-smoker}
{debian-soccer}
{debian-flash}
{C}

\dancersection{最近のDebian関連のミーティング報告}{上川純一}

\subsection{東京エリアDebian勉強会18回目報告}
% (query-replace-regexp "<.*>" "")

7月のDebian勉強会は北海道で開催されました。
上川が Debian の紹介、Debian勉強会の紹介、
MacBook に Debian をインストールする方法について説明しました。

今回の参加人数は40人くらいでした。

会場でMacBookをすでに購入しているひとは数人でした。今回の参加によって東
京でのDebian勉強会に参加しようと思ったひとは5人くらいいました。

\dancersection{Debian Conference　調査進捗}{岩松}
\label{sec:iwamatsudebconf}

調査進捗の報告。

\dancersection{module-assistant}{上川}
\label{sec:modass}

Debian 用にカーネルモジュールパッケージを作成する方法について解説します。

\subsection{従来の方法、kernel-package}

従来は、kernel-package にて実装されていた方法を利用することが多かったで
す。最近は、その簡便さから流行はmodule-assistantに移行しはじめているよう
です。

\subsection{module-assistantの利用}

module-assistant　はパッケージのインストール、ソースの展開、
ビルド、インストールまでの一連の作業を自動化してくれるツールです。

まず、カーネルソースの場所を教えます。通常、現在実行中のカーネルに対して
のソースのディレクトリは\texttt{/lib/modules/\$(uname -r)/build}のシンボ
リックリンクをたどることで取得できます。そのため、何も指定しないで下記の
コマンドをうつと設定できます。

\begin{commandline}
 # m-a prepare
\end{commandline}

一度カーネルソース、もしくはカーネルヘッダパッケージを適切にインストール・
設定したあとはパッケージ名を指定してあげれば、そのパッケージからモジュー
ルを作成し、インストールするところまで実施してくれます。

\begin{commandline}
 # m-a a-i \textit{package}
\end{commandline}

このコマンドを入力すると、\textit{package}-source パッケージをインストー
ルし、/usr/src/\textit{package}.tar.bz2を展開、モジュールパッケージをビ
ルドして、パッケージをインストールしてくれます。

出力例を見てみましょう。

\begin{commandline}
# m-a --text-mode a-i linux-uvc
.
1 パッケージについての情報を更新しました
Getting source for kernel version: 2.6.18-rc2dancer-gb4e54de8-dirty
/lib/modules/2.6.18-rc2dancer-gb4e54de8-dirty/source のカーネルヘッダを利用できます
apt-get install build-essential
パッケージリストを読み込んでいます... 完了
依存関係ツリーを作成しています... 完了
build-essential はすでに最新バージョンです。
アップグレード: 0 個、新規インストール: 0 個、削除: 0 個、保留: 122 個。

完了!
download
パッケージリストを読み込んでいます... 完了
依存関係ツリーを作成しています... 完了
以下のパッケージが新たにインストールされます:
  linux-uvc-source
アップグレード: 0 個、新規インストール: 1 個、削除: 0 個、保留: 122 個。
32.7kB 中 0B のアーカイブを取得する必要があります。
展開後に追加で 73.7kB のディスク容量が消費されます。
パッケージフィールドを読み込んでいます... 完了
パッケージ状態を読み込んでいます... 完了
バグレポートを取得しています... 完了
未選択パッケージ linux-uvc-source を選択しています。
(データベースを読み込んでいます ... 現在 131883 個のファイルとディレクトリがインストールされています。)
(.../linux-uvc-source_0.1.0-2_amd64.deb から) linux-uvc-source を展開しています...
linux-uvc-source (0.1.0-2) を設定しています ...
linux-uvc-source についての情報を更新中

1 パッケージについての情報を更新しました
unpack
Extracting the package tarball, /usr/src/linux-uvc.tar.bz2, please wait...
"/usr/share/modass/packages/default.sh" build
 KVERS=2.6.18-rc2dancer-gb4e54de8-dirty 
 KSRC=/lib/modules/2.6.18-rc2dancer-gb4e54de8-dirty/source KDREV=GIT.2006.07.25.15.08 kdist_image
dh_testdir
dh_testroot
dh_clean
/usr/bin/make -C /usr/src/modules/linux-uvc clean \
        KERNELPATH=/lib/modules/2.6.18-rc2dancer-gb4e54de8-dirty/source 
KERNELRELEASE=2.6.18-rc2dancer-gb4e54de8-dirty KERNELCONF=/lib/modules/2.6.18-rc2dancer-gb4e54de8-dirty/source/.config

[中略]

dh_builddeb --destdir=/home/dancer/shared/git
tar: -: file name read contains nul character
dpkg-deb:
 /home/dancer/shared/git/linux-uvc-modules-2.6.18-rc2dancer-gb4e54de8-dirty_0.1.0-2+GIT.2006.07.25.15.08_amd64.deb 
にパッケージ `linux-uvc-modules-2.6.18-rc2dancer-gb4e54de8-dirty' を構築しています。
make[1]: ディレクトリ `/usr/src/modules/linux-uvc' から出ます
/usr/bin/make  -f debian/rules kdist_clean
make[1]: ディレクトリ `/usr/src/modules/linux-uvc' に入ります
dh_testdir
dh_testroot
dh_clean
/usr/bin/make -C /usr/src/modules/linux-uvc clean \
        KERNELPATH=/lib/modules/2.6.18-rc2dancer-gb4e54de8-dirty/source
 KERNELRELEASE=2.6.18-rc2dancer-gb4e54de8-dirty
 KERNELCONF=/lib/modules/2.6.18-rc2dancer-gb4e54de8-dirty/source/.config 
make[2]: ディレクトリ `/usr/src/modules/linux-uvc' に入ります
rm -f *.o *.ko .*.cmd .*.flags *.mod.c Modules.symvers
rm -rf .tmp_versions
make[2]: ディレクトリ `/usr/src/modules/linux-uvc' から出ます
make[1]: ディレクトリ `/usr/src/modules/linux-uvc' から出ます
dpkg -Ei
 /home/dancer/shared/git/linux-uvc-modules-2.6.18-rc2dancer-gb4e54de8-dirty_0.1.0-2+GIT.2006.07.25.15.08_amd64.deb 
未選択パッケージ linux-uvc-modules-2.6.18-rc2dancer-gb4e54de8-dirty を選択しています。
(データベースを読み込んでいます ... 現在 131888 個のファイルとディレクトリがインストールされています。)
(.../linux-uvc-modules-2.6.18-rc2dancer-gb4e54de8-dirty_0.1.0-2+GIT.2006.07.25.15.08_amd64.deb
 から) linux-uvc-modules-2.6.18-rc2dancer-gb4e54de8-dirty を展開していま
 す... 
linux-uvc-modules-2.6.18-rc2dancer-gb4e54de8-dirty (0.1.0-2+GIT.2006.07.25.15.08) を設定しています ...

\end{commandline}


\subsection{パッケージの作成方法}

まず、source　用のパッケージを作成します。そのパッケージはモジュールのソー
スを\texttt{/usr/src/package.tar.bz2}をインストールします。その中身自体
も、またDebianソースパッケージの形態になっています。

module-assistant用のソースの中に debian/*.modules.in というファイル名で
おいてあると、その中にある \texttt{\_KVERS\_} と書いている部分がカーネル
のバージョン番号に置換されます。

\begin{itemize}
 \item rules
 \item control.modules.in: モジュールパッケージのコントロールファイルで
       す。
 \item postinst.modules.in: インストールされたときに実行されます。depmod
       などを実行します。
\end{itemize}

\subsection{CDBSを利用した例}



\subsection{参考文献}

\begin{itemize}
 \item CDBSのルールを展開して出力する方法
       \url{http://syn.theti.ca/articles/2006/07/27/plumbing-the-depths-of-cdbs}
 \item man 8 module-assistant
 \item \url{/usr/share/doc/module-assistant/examples/templates-debian-dir.tar.bz2}
\end{itemize}

\dancersection{グループワーク}{全員}
\label{sec:groupwork}

OSC沖縄というイベントが開催されます、
そこで展示するのであればどういうことをするのか、議論しましょう。

\subsection{過去の実績}
\subsection{期待する効果の例}
何をもって成功だったとするのか、考えてみましょう。
ここでは例を出してみます

\begin{itemize}
 \item Debian勉強会にメンバーが増えた
 \item 沖縄でもDebian勉強会をしようという話になった
 \item 沖縄在住のDebian Developerが増えた
\end{itemize}

\dancersection{次回}{}

未定です。
内容は本日決定予定です。

参加者募集はまた後程。

\newpage

\vspace*{15cm}
\hrule
\vspace{2mm}
\includegraphics[width=2cm]{image200502/openlogo-nd.eps}
\noindent \Large \bf Debian 勉強会資料\\ \\
\noindent \normalfont 2006年8月19日 \hspace{5mm}  初版第1刷発行\\
\noindent \normalfont 東京エリア Debian 勉強会 （編集・印刷・発行）\\
\hrule

\end{document}
