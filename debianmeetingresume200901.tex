%; whizzy chapter
% -initex iniptex -latex platex -format platex -bibtex jbibtex -fmt fmt
% 以上 whizzytex を使用する場合の設定。


%     Tokyo Debian Meeting resources
%     Copyright (C) 2009 Junichi Uekawa

%     This program is free software; you can redistribute it and/or modify
%     it under the terms of the GNU General Public License as published by
%     the Free Software Foundation; either version 2 of the License, or
%     (at your option) any later version.

%     This program is distributed in the hope that it will be useful,
%     but WITHOUT ANY WARRANTY; without even the implied warranty of
%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%     GNU General Public License for more details.

%     You should have received a copy of the GNU General Public License
%     along with this program; if not, write to the Free Software
%     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA

%  preview (shell-command (concat "evince " (replace-regexp-in-string "tex$" "pdf"(buffer-file-name)) "&"))
% 画像ファイルを処理するためにはebbを利用してboundingboxを作成。
%(shell-command "cd image200901; ebb *.png")

%%ここからヘッダ開始。

\documentclass[mingoth,a4paper]{jsarticle}
\usepackage{monthlyreport}

% 日付を定義する、毎月変わります。
\newcommand{\debmtgyear}{2009}
\newcommand{\debmtgmonth}{1}
\newcommand{\debmtgdate}{17}
\newcommand{\debmtgnumber}{48}

\begin{document}

\begin{titlepage}
\thispagestyle{empty}

% タイトルページ:編集必要な部分は最初のマクロに飛ばすこと

\vspace*{-2cm}
第\debmtgnumber{}回 東京エリア Debian 勉強会資料

\hspace*{-2.4cm}
\includegraphics[width=210mm]{image200801/2008title.eps}\\
\hfill{}\debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日

\end{titlepage}

\dancersection{Introduction}{上川 純一}

\begin{multicols}{2}
 
 
 今月のDebian勉強会へようこそ。これからDebianの世界にあしを踏み入れると
 いう方も、すでにどっぷりとつかっているという方も、月に一回Debianについ
 て語りませんか？

 Debian勉強会の目的は下記です。

 \begin{itemize}
 \item \underline{Debian Developer} (開発者)の育成。
 \item 日本語での「\underline{開発に関する情報}」を整理してまとめ、アップデートする。
 \item \underline{場}の提供。
 \begin{itemize}
  \item 普段ばらばらな場所にいる人々が face-to-face で出会える場を提供
	する。
  \item Debian のためになることを語る場を提供する。
  \item Debianについて語る場を提供する。
 \end{itemize}
 \end{itemize}		

 Debianの勉強会ということで究極的には参加者全員がDebian Packageをがりがり
 と作るスーパーハッカーになった姿を妄想しています。情報の共有・活用を通し
 て Debianの今後の能動的な展開への土台として、「場」としての空間を提供す
 るのが目的です。

 2009年の計画は仮です。

 \begin{enumerate}
  \item 新年の企画 (アンサンブル荻窪開催)
  \item OSC
  \item (東京大学?)
  \item (千代田区都立図書館?\footnote{\url{http://www.library.chiyoda.tokyo.jp/}})
  \item (東京大学?)
  \item 
  \item スペインにて開催
  \item Debconf報告会
  \item 
  \item 
  \item 
  \item 忘年会
 \end{enumerate}


 会場候補としては下記があります:

 \begin{itemize}
  \item 大学
  \item 恵比寿SGIホール
  \item Googleオフィス
  \item 公民館(あんさんぶる荻窪等)
  \item 都立会議室(無線LAN)
  \item 健保の施設
 \end{itemize}

\end{multicols}


\newpage

\begin{minipage}[b]{0.2\hsize}
 \definecolor{titleback}{gray}{0.9}
 \colorbox{titleback}{\rotatebox{90}{\fontsize{80}{80} {\gt デビアン勉強会} }}
\end{minipage}
\begin{minipage}[b]{0.8\hsize}
\hrule
\vspace{2mm}
\hrule
\tableofcontents
\vspace{2mm}
\hrule
\end{minipage}

\dancersection{事前課題}{上川 純一}


2012年の正月、僕は実家に帰って旧友を深めるべく喫茶店にいた。最近ここら
へんには立ち寄っていないなぁ。そういうことをつらつらと思っているとふと
人影が目に入る。

「おぉ、待たせたな」

「あぁ。久しぶり」

「どうした」

「いや」

そして僕は手元のDebianデバイスから目をはなす。

「お、Debianの調子はどうよ、最近はどんな使い方しているの?」

この質問をいま僕にするなんて。血圧がすこし上がるのを感じながら
僕は饒舌になりすぎないように説明する。

「(A)」


{\bf 問題}

\begin{enumerate}
 \item Debianに関しての、2009年の抱負を述べよ
 \item 「2012のDebian」と題して(A)を埋めよ
\end{enumerate}

この課題に対して提出いただいた内容は以下です。

\input{image200901/prework.tex}

% image200901/prework.tex 内部にテキストを追加してください。
%
%


\dancersection{最近のDebian関連のミーティング報告}{上川 純一}
\subsection{東京エリアDebian勉強会47回目報告}
% (query-replace-regexp "<.*?>" "")
% (query-replace-regexp "^[	 ]\+" "")

東京エリアDebian勉強会報告。
2008年12月20日土曜日に11月の第47回東京エリアDebian勉強会を実施しました。
今回の参加者は
前田耕平さん、
一井崇さん、
やまだたくまさん、
小室文さん、
平澤俊雄さん、
藤沢理聡さん、
じつかたさん、
岩松信洋さん、
小林儀匡さん、
山本浩之さん、
キタハラさん、
日比野啓さん、
id774さん、
やまねひできさん、
でんさん、
でんさんの友人Aさん、
上川x2の
18名でした。

まず、2008年の勉強会の実績について上川が話をしました。
今回まとめてみた情報は、参加人数と事前課題の提出実績と
事後のブログ掲載の率です。
事後のブログ掲載は開催している側としては励みになるのでうれしい
というような話をした気がします。


次に上川が、2009年にむけて最近のトレンドについて
整理して、SWOTの図を作成するという企画をしました。
議論はいろいろと発散しましたが、アクションアイテムはたくさんでてきたので
これが次につながるとよいですね。


最後にライトニングトークを実施しました。
小林さんは apt-cache dotty の話。
id774さんはDebianユーザとしての告白。
上川は sqlite3 使って見ましたネタ。
やまだたくまさんは資料の翻訳のやりかたについて、機械翻訳をベースにどう労力を節約するかというネタ。
岩松さんは日本 . ユーザ会設立について。
前田さんはヨメをDebianユーザにする方法。
日比野さんはocamlユーザ会設立宣言。


% ===============================================================
\dancersection{Git+メールでの事前課題提出にまつわる課題}{上川純一}
\index{git}
% ===============================================================

2008年11月、12月、および2009年1月には事前課題をGitを利用してGitの生成する
パッチをメールで提出してもらうという形式にしていました。
その場合には git pull するたびにコンフリクトが発生します。
その原因となる仕組みと対策方法について説明します。

\subsection{コンフリクトが発生しやすい理由}

それでは、Debian 勉強会の2008年11,12月の資料でコンフリクトが発生しやすかっ
た理由を分析してみましょう。

\subsubsection{元のファイルの形式}

\begin{commandline}
-\subsection{}
+\subsection{XXXX}
+内容
+
\end{commandline}

同じファイルについて作業し、しかも同じ場所にすこしづつ異なる変更を別の人
が行うという仕組みになっていました。この場合、二つのパッチはかならずコン
フリクトし、手動で解消する必要があります。今回パッチが同じ場所に挿入して
いる場合に、順序は問わないので適当でよいのですが、\texttt{git apply} には
その知識はないため、毎回コンフリクトの解消を行います。

\subsubsection{メールを利用したサブミット}

\begin{figure}
 \includegraphics[width=\hsize]{image200901/qgit-trees.png}
 \caption{qgitでみたツリーの状況、手動でマージが複数発生している}
 \label{fig:mergedtokyodebian}
\end{figure}

締切り直前に作業するのが習慣のため、
複数の人がある時点の同じコミットに対してパッチを作成、
それを上川がある時点でマージしました(\fgref{fig:mergedtokyodebian})。

毎回コンフリクトが発生するのですが、それを上川が解消してマージとして記録
されています。そのため、各自が提出したバージョンとは若干違うパッチとなっ
てalioth.debian.orgにあるGitツリーにマージされています。

\subsection{マージ・コンフリクトの発生のしかた}

Gitはデフォルトではmasterブランチで作業します。\texttt{git pull} コマンドはAlioth
にあるリモートのツリーの情報をoriginブランチにとってきて、masterブランチ
にマージします。マージする内容がなければ、Fast-forward されます。

まず最初に各自が自分のGitツリーの master ブランチでパッチを作成します。そ
して、\texttt{git format-patch} の結果をパッチファイルとして送付します。上川が
\texttt{git am} でそのパッチを適用し、Alioth のGitツリーに公開します。複数人が同時
期に事前課題を提出しているため、\texttt{git am} でパッチを適用した場合にそのままで
は適用できない状況がおき、「コンフリクト」が発生します。「コンフリクト」
が発生した場合には上川が手動でその部分を修正します。

各自がAliothのGitツリーの最新バージョンを \texttt{git pull} で取得してくると
origin ブランチには上川の作成した変更を伴ったパッチが入ります。
masterブランチで自分の作成したものからは若干変更が加わっています。
そのため、内容に整合性がとれるとはかぎらないため、コンフリクトが発生しま
す。コンフリクトがおきなかったとしても履歴にマージが残ります。

\subsection{マージ・コンフリクトの解消方法}

\subsubsection{rebase して履歴をきれいにする}

マージなどを解消するためには、\texttt{git rebase -i origin} で不要なパッチを目視し
て消す作業をすればよいです。そもそも \texttt{git pull --rebase} すると、おそらくマー
ジが残らないが、コンフリクトの解消は必要になります。これは面倒です。

\subsubsection{作業の仕方を変える}

解決策としては、各自が提出用のブランチを作成してそこで作業し、そこで提出
用のデータを作成してしまえばよいというのがあります。

\begin{commandline}
 
$ git checkout -b preworkXXXX origin
$ # ... このブランチで作業
$ git format-patch ... 

# 提出してしまったらmasterブランチにもどる
$ git checkout master 
$ git pull # 上川の適用した版がとりこまれる

# さらに新しいブランチを作成して次の月の作業を行う
$ git checkout -b preworkYYYY origin
\end{commandline}

preworkXXXX ブランチを毎回捨てる。

\subsubsection{format-patchではない方法を使う}

もう一つの選択肢としては、format-patchではない方法でデータの送受信を行う
ことがあります。
format-patchと git am の送受信の過程でコミットのハッシュが異なっているこ
とから各位のコンフリクトが発生しているのだろうということです。

git bundle でバイナリ形式でデータを送付することができます。これを使うとハッ
シュは保存されるので上川のコンフリクトは解消されませんが、コンフリクトを
解消したログがそのまま残るので、各位のコンフリクトは発生しないでしょう。

\subsection{リポジトリ管理者側の課題}

視点をすこし変えてリポジトリの管理者として上川の作業を見てみましょう。
git am でパッチを適用して、マージするという作業を行うのですが、そのワー
クフローは実は面倒です。

特にメールを受けて、git am がコンフリクトを起こす確率が高く、
複数のパッチがあるとほぼ確実にコンフリクトを解消することになります。

現状は複数の一時的に利用するブランチに git am で適用したものをあとでマー
ジする、という方法をとっています。

\begin{commandline}
  git checkout -b マージ用のブランチA master
  git am -3 パッチ
  git checkout -b マージ用のブランチB master
  git am -3 パッチ
  git checkout master 
  git merge マージ用のブランチA マージ用のブランチB
  コンフリクトの解消
  git commit -a 
\end{commandline}

ただ、10人以上の事前課題のハンドリングには時間もかかり、毎回したい作業
ではないです。

自動でコンフリクトするかしないかについては判定できるし、その結果がビルド
するかはチェックできるのであれば、自動処理でコミットを管理できないか?と考
えています。

最低限のチェックだけしてパッチを master ブランチに自動でとりこんでくれる
ような仕組み、ないもんでしょうかねぇ?

%============================================================
\dancersection{NamazuみたいにGoogle AJAX Search API}{小室 文}
\index{Google AJAX Search API}
\index{javascript}
\index{search}
%============================================================

Namazuを導入しなくてもGoogleの検索エンジンを使って御手軽にサイト内全文検索する方法を説明します。
\subsection{Googleの検索を使うには}
\begin{enumerate}
\item JavaScriptあり
\begin{enumerate}
\item 自分でJavaScriptを組む
\item ウィザードを使う
\end{enumerate}
\item JavaScriptなし
\end{enumerate}

どの場合にもHTMLファイル（もしくはPHPなど）をウェブサーバに置くことで動作します。\\JavaScript版はブラウザされあればどこでも動きます。

\subsubsection{JavaScriptあり・なし両方}
Google AJAX Search APIのKEYを取得
\subsubsection{JavaScriptあり}
Google AJAX Search API JavaScript ライブラリをロードする
\begin{commandline}
<script src="http://www.google.com/uds/api?file=uds.js&v=1.0" type="text/javascript"></script>
\end{commandline}
\begin{commandline}
//名前空間の為に追加
    google.load("search", "1.0"); 

//検索をするオブジェクトを作成する
    var searchControl = new google.search.SearchControl(); 

//検索準備
//子オブジェクトのサーチャーメソッドを検索コントロールに追加。必要であればオプションも。 
    var options = new GsearcherOptions(); //表示オプション指定
    options.setExpandMode(GSearchControl.EXPAND_MODE_OPEN);//結果一覧を開いた状態で出力する
    options.setExpandMode(GSearchControl.EXPAND_MODE_CLOSED);//結果を閉じた状態のまま結果出力をする
    options.setExpandMode(GSearchControl.EXPAND_MODE_PARTIAL);//結果がオープン拡張モード
    options.setRoot(document.getElementById("resultsComeHere"));//結果を指定する場所に表示するオプション

//サイト制限の設定
    var siteSearch = new GwebSearch();
    siteSearch.setUserDefinedLabel("Aya's Site");
    siteSearch.setSiteRestriction("popowa.com");//直接URLを指定
    siteSearch.setSiteRestriction("000455696194071821846:reviews");//カスタムエンジンのKeyを指定\footnote{カスタム検索エンジンとはウィザードで検索窓をある程度のデザインや制限を付けて作ることが出来る物です。\\
http://www.google.com/coop/cse/ }

//準備終了、セットする
    searchControl.addSearcher(siteSearch, options);//オプションがあれば
    searchControl.addSearcher(new GwebSearch());//オプションがなければ
//出力準備
    var result = document.getElementById("googleResults");
    var drawOptions = new GdrawOptions();//オプション用にdrawOptions オブジェクトを作成
    drawOptions.setDrawMode(GSearchControl.DRAW_MODE_LINEAR);//1)一列に出力
    drawOptions.setDrawMode(GSearchControl.DRAW_MODE_TABBED);//2)タブに出力
    drawOptions.setSearchFormRoot(document.getElementById("searchForm"));//検索結果と検索フォームを切り離す機能
    searchControl.draw(result, drawOptions);
//検索結果の保持(prototype)
    searchControl.setOnKeepCallback(this, MyKeepHandler);//この(this)検索状況をMyKeepHandlerに持たせておく。
    searchControl.setSearchCompleteCallback(this, OnSearchComplete); //検索の実行後
    searchControl.setSearchStartingCallback(this, OnSearchStarting); //検索の完了前
//検索する！
    searchControl.execute(keyword);
\end{commandline}
body内に検索窓、検索結果を出力したい場所にdivを入れる
\begin{commandline}
 <div id="searchForm" class="searchForm">form</div>
 <div id="googleResults" class="googleResults">googleResults</div>
\end{commandline}


\subsubsection{JavaScriptなし}
\url http://ajax.googleapis.com/ajax/services/search/web
に引数を渡してリクエストするとJSON形式でレスポンスが得られる

\begin{table}[h]
\begin{tabular}{|c|c|c|}
\hline
   q? & 検索したいキーワード、検索式 & 日本語だった場合はurlencode()しないとうまく動かない\\
\hline
   v=1.0 & プロトコル番号の指定 & 現在は1.0しかない\\
\hline
   key? & Google AJAX Search APIのKey & 申請したFQDN=実際に使っているFQDNでなくてもよい\\
\hline
   start? & 検索結果の開始インデックス & ドメイン指定をすると160件から持って来てくれなくなる\\
\hline
   cx? & カスタム検索エンジンのID & 特定のドメインからのみ検索する事が出来る\\
\hline
   lr? & 特定の言語のドキュメントを検索対象とする & \\
\hline
\end{tabular}
\end{table}
レスポンス形式
\begin{commandline}
{"responseData": {
 "results": [
  {
   "GsearchResultClass": "GwebSearch",
   "unescapedUrl": "http://en.wikipedia.org/wiki/Paris_Hilton",
   "url": "http://en.wikipedia.org/wiki/Paris_Hilton",
   "visibleUrl": "en.wikipedia.org",
   "cacheUrl": "http://www.google.com/search?q\u003dcache:TwrPfhd22hYJ:en.wikipedia.org",
   "title": "\u003cb\u003eParis Hilton\u003c/b\u003e - Wikipedia, the free encyclopedia",
   "titleNoFormatting": "Paris Hilton - Wikipedia, the free encyclopedia",
   "content": "\[1\] In 2006, she released her debut album..."
  },
  ...
 ],
 "cursor": {
  "pages": [
   { "start": "0", "label": 1 },
   { "start": "4", "label": 2 },
   { "start": "8", "label": 3 },
   { "start": "12","label": 4 }
  ],
  "estimatedResultCount": "59600000",
  "currentPageIndex": 0,
  "moreResultsUrl": "http://www.google.com/search?oe\u003dutf8\u0026ie\u003dutf8..."
 }
}
, "responseDetails": null, "responseStatus": 200}
\end{commandline}
レスポンスを個々のプログラムで処理する
\begin{commandline}
<?php
function search($keyword, $page, $key){
	$uri = 'http://ajax.googleapis.com/ajax/services/search/web';
	$uri .= '?q=' . urlencode($keyword);
	$uri .= '&key='.$key;
	$uri .= '&v=1.0&rsz=large&hl=ja&start=' . $page;
	return json_decode(file_get_contents($uri));
}
$keyword = "東京エリアDebian勉強会";
$key = 'アプリケーションのキー';
$data = search($keyword, 1, $key);
var_dump($data);
?>

\end{commandline}

\subsubsection{現状の問題点}
Google AJAX Search APIにはbugがある。

JavaScriptあり:
setSiteRestrictionでドメインを指定して検索をしようとした
場合、検索結果の総数が検索する事に変わります。

JavaScriptなし:
\verb!?q=DMC\%20site:http://www.debian.or.jp/!とするとドメイン検索は出来
るが、
\verb!start?!で引数を渡すたびに同じように結果総数が変わります。

\subsubsection{まとめ}

Namazuみたいにページ分けされた検索の仕組みは構築出来ませんでした(2009/1
現時点)。

Google AJAX Search APIのbug?は長い事放置プレイ中(2008/3頃から)のようです
が（仕様である事や、免責みたいなのも見当たらない）、estimatedResultCount
というぐらいなので、暗黙の了解なのでしょうか・・・

ちなみにYahoo Web検索でも同じようなbug?がありますが、Yahoo!は検索リクエ
ストがある度に検索結果を積算しているので違います、と予め免責してあります。
\footnote{表示件数について :
\url{http://help.yahoo.co.jp/help/jp/search/web/web-14.html}}

% ===============================================================
\dancersection{AspireOneでDebian sidサーバー}{id774}
\index{AspireOne}
\index{sid}
\index{NetBook}
% ===============================================================

この冬休みを利用してAspireOneにDebian sidの環境を構築しました。
AspireOneと言えば今流行りのNetBookとしてモバイル用途で知られています。
今回はその省電力性に注目し、モバイル以外にもポータブルで場所を取らない
簡易サーバーとして利用可能なのではないかと考えトライしました。

\subsection{AspireOneでsidを使ってみる}

\subsubsection{AspireOneの電力消費効率}

AspireOneは省電力性に優れるIntel Atom CPUを搭載しており、アイドル状態
で約10W、高負荷状態でも15W程度で動作します。
高性能を要するエンコードやリッピングではなく、ちょっとしたWebサーバー等
の用途であれば安価でエコなサーバーとして利用できそうです。

\subsubsection{sidを選択する理由}

通常、サーバーであれば安定版を選択します。しかしAspireOneならいつでも
携帯して持ち運び、管理者が対話的に操作してメンテナンスすることができるの
で、これなら最新のパッケージを利用できるsidを使っても、
何かトラブルがあればすぐ対応できるでしょう。

\subsection{Debianをインストール}

Debian Wiki \footnote{\url{http://wiki.debian.org/DebianAcerOne}} に
情報がまとまっているので、基本的にこれを参考に作業しました。
最低条件として、物理攻撃からのセキュリティ対策、無線LAN、イー・モバイル、
サウンド、WebCamを使えるようになることが目標です。

\subsubsection{名刺サイズのイメージからのインストール}

sidのインストールには主に2種類の方法
\footnote{\url{http://www.debian.org/CD/faq/\#unstable-images}} があります。
\begin{itemize}
 \item テスト版のDebianのsources.listをsidに書き換えてaptitude full-upgradeする。
 \item 最小サイズの最新ビルドイメージを利用してエキスパートモードでネットワークインストールをおこなう。
\end{itemize}

今回は後者の方法を採用しました。
インストールにはDailyビルド最新版のDebianイメージ 
\footnote{\url{http://cdimage.debian.org/cdimage/daily-builds/daily/arch-latest/i386/iso-cd/}} 
を利用します。
名刺サイズのインストールイメージを利用して、エキスパートモードでインストー
ルを開始すると、不安定版を選択することができます。

\subsubsection{暗号化LVMの設定}

モバイルで外に持ち出すことを考えると、HDDやPC本体の盗難によるリスクを考
慮しなければなりません。Debianはetchから暗号化LVMを標準で利用出来るよう
になりました。これで/boot以外の領域を暗号化することができますのでセキュ
リティとしては非常に強力になるでしょう。

この際、元のWindows領域を全て上書き末梢するので4〜5時間程度かかります。
そこで一晩放置して翌日作業をするようにしました。

\subsubsection{無線LANの設定}

module-assistantを利用してmadwifiをインストールします。

\begin{commandline}
sudo aptitude install build-essential module-assistant madwifi-source
sudo m-a prepare
sudo m-a auto-install madwifi
\end{commandline}

\subsubsection{イー・モバイルの設定}

現時点でlenny/sidに搭載されているカーネル2.6.26ならイー・モバイルによる通信が可
能で、USBの着脱によるプラグアンドプレイにも対応しています。

\texttt{pppconfig} パッケージをインストールし \texttt{/etc/ppp/peers/em}
ファイルに以下のように記述します。

\begin{commandline}
user "em@em"
connect "/usr/sbin/chat -v -f /etc/chatscripts/pap -T *99***1#"
/dev/ttyUSB0
115200
noipdefault
usepeerdns
defaultroute
persist
noauth
\end{commandline}

\texttt{dip} グループに所属したアカウントなら \texttt{pon em} コマンドで
イー・モバイル接続ができるようになります。

\subsubsection{サウンドの設定}

module-assistantを利用してALSAをセットアップします。

\begin{commandline}
sudo m-a update
sudo m-a prepare
sudo m-a a-i alsa
sudo alsa force-unload
sudo depmod -ae
sudo modprobe snd-hda-intel
\end{commandline}

\subsubsection{WebCamの設定}

linux-uvc \footnote{\url{http://linux-uvc.berlios.de/}} にあるUVCカメラ用
のドライバを利用します。
有志によるサイト \footnote{\url{http://www.nigauri.org/~iwamatsu/wiliki.cgi}} に
Debianパッケージがあることに後で気づいたのですが、今回はソースコードからビルドをおこないました。

\begin{commandline}
svn co svn://svn.berlios.de/linux-uvc/linux-uvc/trunk
cd trunk
make && sudo make install
\end{commandline}

\subsection{sidをメンテナンスする}

\subsubsection{アップグレード}

私は以下のコマンドの実行結果を \texttt{cron} で定期的に取得しています。

\begin{commandline}
aptitude update && aptitude -s -v -y full-upgrade
\end{commandline}

実際にアップグレードはしませんが更新予定のパッケージの一覧を見ることがで
きます。これに加え必要に応じて \texttt{apt-listchanges} や
\texttt{apt-listbugs} 等を使い、
既存パッケージの依存関係に影響を及ぼさないことを確認の上でアップグレード
することにしています。

\subsubsection{仮想環境での事前検証}

さらに確実性を高めるための方法としてVMwareなど仮想環境を利用する方法が
あります。あらかじめゲストOSとして実機と同じパッケージ構成のsidを用意し、
先にそちらを変更して問題が無いことを確認してから実機のパッケージを変更す
ればトラブルを避けることができます。

特に私は複数のsid環境を持っているので、仮想環境で事前検証してから全マシ
ンを一斉にアップグレードするなどフル活用しています。

%============================================================
\dancersection{Debian GNU/Linux 2ch ブラウザ普及計画}{山本 浩之}
\index{2ch browser}
%============================================================
結構前から色んな 2ch ブラウザを stable 用にバックポートして、２ちゃんねる
スレッドテンプレなどで非公式に upload していました。
しかし、最近 JD が公式パッケージ入りしましたが、それ以外はなかなか公式に
は入ってきてはいません。
そこでいくつかの 2ch ブラウザについて、公式パッケージ入りを検討してみました。

\subsection{対象の 2ch ブラウザ}
\begin{itemize}
 \item Navi2ch for Emacs
 \item おちゅ〜しゃ
 \item Kita
 \item Kita2
 \item Chalice for Vim
 \item w3m-2ch
 \item Gnview
\end{itemize}

\subsection{Navi2ch for Emacs}
ライセンス:GPL
Emacs 上で動く 2ch ブラウザ。
昔から野首さんが、Navi2ch の本家で最新の CVS 版を配っていることで有名です。
ライセンス的にも問題はありませんが、どうやら野首さんのポリシーとして、
公式パッケージに入れるのは控えているそうです。
現に、やっと Lenny 入りした JD も 2ch の仕様変更のため、Lenny 版は
掲示板に書き込めない、ということになってしまいました。
今後も続きそうな、いきなりの仕様変更にも対応できる配りかた (backports とか
volatile とか) を検討すれば、きっと野首さんも公式パッケージに入れてくれ
るものと信じています。

\subsection{おちゅ〜しゃ}
ライセンス:2項目 BSD (LGPL ライブラリを含む)
GTK+ 上で動く、C++ で書かれた 2ch ブラウザ。
これはかなり前から検討していましたが、upstream の開発周期が不安定で、時々完
全に止まってしまうのが難でした。
最近、また開発が再開し、久々のアップデートが出ていたので、思わず ITP し
てしまいました。
パッケージは CDBS を用いて、問題なくでき、起動も問題ないようです。
man と README.Debian を書けばアップロード出来る所まできています。

\subsection{Kita}
ライセンス:GPL
KDE/QT 上で動く、C++ で書かれた 2ch ブラウザ。
これも前から非公式で配られていますが (http://tossi.orz.hm)、tossi　さん
にコンタクトを取った所、公式パッケージにするつもりはないそうです。
私も検討しましたが、upstream が KDE4 への対応を、今のところする気が無い
と言うことなので、かなり速くて高機能なのですが、現在保留中です。

\subsection{Kita2}
ライセンス:MIT/X
KDE/QT 上で動く、Ruby で書かれた 2ch ブラウザ。
Kita の後継として出てきたブラウザです。
まだまだバグもあり、機能も少ないのですが、ITP してみました。
パッケージ的にも一応一通り揃え (CDBS) 、スポンサー探しをしていたのですが、
実はEUC-JP only な環境では警告もなく文字化けすることを上川さんに指摘され、
upstream に連絡を入れている所です。

\subsection{Chalice for Vim}
ライセンス：俺俺ライセンス
Vim 上で動く 2ch ブラウザ。
開発も順調ですが、元々 Vim を Windows に移植している人が upstream なため
か、以下のような'俺俺'ライセンスです。


利用許諾
以下の諸条件に合意された方へ本ソフトウェアの利用が許諾されます。

本ソフトウェアを利用することで、ソフトウェア利用者にはソフトウェア作成者へ
対価を支払う義務が生じません。

本ソフトウェアの不具合がソフトウェア作成者へ報告された場合には、ソフトウェ
ア作成者は期間を限定せずに本ソフトウェアを修正しますが、修正前後を問わず本
ソフトウェアの利用に際して生じた損害をソフトウェア作成者は補償しません。

ソフトウェア利用者は本ソフトウェアを、商用・非商用を問わず、使用・再配布す
ることができます。

ソフトウェア利用者へは本ソフトウェアを改変する権利がソフトウェア作成者より
与えられます。但し本ソフトウェアへ改変を施したバージョンを再配布する場合に
は、改変内容及びその実装方法をソフトウェア作成者へ無条件で開示する義務が生
じます。

以上の諸条件に合意できない場合は本ソフトウェアの利用を中止してください。


このうち、特に問題になるのは、「但し本ソフトウェアへ改変を施したバージョ
ンを再配布する場合には、改変内容及びその実装方法をソフトウェア作成者へ無
条件で開示する義務が生じます。」の部分だと思います。
これを「ソフトウェア作成者」から、「公衆」に変えると多分 GPL が近くなる
のではないかと考えていますが、その変更でありうる損害が良く分からず、まだ
ライセンス変更交渉もしていません。

\subsection{w3m-2ch}
ライセンス：記述無し
w3m 上で動く 2ch ブラウザ。
半角カナ以外の書き込みはできることは確認しましたが、残念ながらライセンス
も、upstream への連絡先も記述が無く、断念しました。

\subsection{Gnview}
ライセンス:GPL
GTK+ 上で動く perl で書かれた 2ch ブラウザ。
既にやまねさんにより ITP が出されていますが、日本語限定なこともあり、な
かなかスポンサーが付かないようです。

\subsubsection{現状の問題点}
\begin{itemize}
 \item 2ch ブラウザは日本語限定ソフトウェアで、日本語が分かるスポンサー
       を探さねばならない。
 \item 2ch は予告無く仕様変更をするため、新しいバージョンを即座に配布で
       きる仕組みが必要。
 \item 2ch 自体の評判も芳しくなく、名前を出して関わることを嫌う人も多い。
\end{itemize}
などなど。

%============================================================
%\dancersection{XXX}{名前}
%\index{XXX}
%============================================================

\clearpage

%\printindex

\cleartooddpage

\vspace*{15cm}
\hrule
\vspace{2mm}
\includegraphics[width=2cm]{image200502/openlogo-nd.eps}
\noindent \Large \bf Debian 勉強会資料\\ \\
\noindent \normalfont \debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日 \hspace{5mm}  初版第1刷発行\\
\noindent \normalfont 東京エリア Debian 勉強会 （編集・印刷・発行）\\
\hrule


\end{document}
