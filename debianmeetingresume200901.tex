%; whizzy chapter
% -initex iniptex -latex platex -format platex -bibtex jbibtex -fmt fmt
% 以上 whizzytex を使用する場合の設定。


%     Tokyo Debian Meeting resources
%     Copyright (C) 2009 Junichi Uekawa

%     This program is free software; you can redistribute it and/or modify
%     it under the terms of the GNU General Public License as published by
%     the Free Software Foundation; either version 2 of the License, or
%     (at your option) any later version.

%     This program is distributed in the hope that it will be useful,
%     but WITHOUT ANY WARRANTY; without even the implied warranty of
%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%     GNU General Public License for more details.

%     You should have received a copy of the GNU General Public License
%     along with this program; if not, write to the Free Software
%     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA

%  preview (shell-command (concat "evince " (replace-regexp-in-string "tex$" "pdf"(buffer-file-name)) "&"))
% 画像ファイルを処理するためにはebbを利用してboundingboxを作成。
%(shell-command "cd image200812; ebb *.png")

%%ここからヘッダ開始。

\documentclass[mingoth,a4paper]{jsarticle}
\usepackage{monthlyreport}

% 日付を定義する、毎月変わります。
\newcommand{\debmtgyear}{2009}
\newcommand{\debmtgmonth}{1}
\newcommand{\debmtgdate}{17}
\newcommand{\debmtgnumber}{48}

\begin{document}

\begin{titlepage}
\thispagestyle{empty}

% タイトルページ:編集必要な部分は最初のマクロに飛ばすこと

\vspace*{-2cm}
第\debmtgnumber{}回 東京エリア Debian 勉強会資料

\hspace*{-2.4cm}
\includegraphics[width=210mm]{image200801/2008title.eps}\\
\hfill{}\debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日

\end{titlepage}

\dancersection{Introduction}{上川 純一}

\begin{multicols}{2}
 
 
 今月のDebian勉強会へようこそ。これからDebianの世界にあしを踏み入れると
 いう方も、すでにどっぷりとつかっているという方も、月に一回Debianについ
 て語りませんか？

 Debian勉強会の目的は下記です。

 \begin{itemize}
 \item \underline{Debian Developer} (開発者)の育成。
 \item 日本語での「\underline{開発に関する情報}」を整理してまとめ、アップデートする。
 \item \underline{場}の提供。
 \begin{itemize}
  \item 普段ばらばらな場所にいる人々が face-to-face で出会える場を提供
	する。
  \item Debian のためになることを語る場を提供する。
  \item Debianについて語る場を提供する。
 \end{itemize}
 \end{itemize}		

 Debianの勉強会ということで究極的には参加者全員がDebian Packageをがりがり
 と作るスーパーハッカーになった姿を妄想しています。情報の共有・活用を通し
 て Debianの今後の能動的な展開への土台として、「場」としての空間を提供す
 るのが目的です。

 2009年の計画は仮です。

 \begin{enumerate}
  \item 新年の企画 (アンサンブル荻窪開催)
  \item OSC
  \item 
  \item 
  \item 
  \item 
  \item スペインにて開催
  \item Debconf報告会
  \item 
  \item 
  \item 
  \item 忘年会
 \end{enumerate}


 会場候補としては下記があります:

 \begin{itemize}
  \item 大学
  \item 恵比寿SGIホール
  \item Googleオフィス
  \item 公民館(あんさんぶる荻窪等)
  \item 都立会議室(無線LAN)
  \item 健保の施設
 \end{itemize}

\end{multicols}


\newpage

\begin{minipage}[b]{0.2\hsize}
 \definecolor{titleback}{gray}{0.9}
 \colorbox{titleback}{\rotatebox{90}{\fontsize{80}{80} {\gt デビアン勉強会} }}
\end{minipage}
\begin{minipage}[b]{0.8\hsize}
\hrule
\vspace{2mm}
\hrule
\tableofcontents
\vspace{2mm}
\hrule
\end{minipage}

\dancersection{事前課題}{上川 純一}

今回の事前課題は:

\begin{enumerate}
 \item ...
\end{enumerate}

この課題に対して提出いただいた内容は以下です。

\input{image200901/prework.tex}

\dancersection{最近のDebian関連のミーティング報告}{上川 純一}
\subsection{東京エリアDebian勉強会47回目報告}
% (query-replace-regexp "<.*?>" "")
% (query-replace-regexp "^[	 ]\+" "")

%TODO fill

\dancersection{Git+メールでの事前課題提出にまつわる課題}{上川純一}
\index{git}

2008年11月、12月、および2009年1月には事前課題をGit+メールで提出してもら
うという形式にしていました。
その場合にコンフリクトが発生します。
その原因となる仕組みと対策方法について説明します。

\subsection{コンフリクトが発生しやすい理由}


\subsubsection{元のファイルの形式}

\begin{commandline}
-\subsection{}
+\subsection{XXXX}
\end{commandline}

挿入だけであればコンフリクトにはならない。


\subsubsection{メールを利用したサブミット}

複数の人が同じHEADに対してパッチを作成、
それを上川がマージした。
コンフリクトを上川が解消しているため、提出したバージョンとは若干違うパッ
チになっている。


\subsection{マージ・コンフリクトの発生のしかた}

master ブランチでパッチを作成する

git format-patch の結果を送付、上川が適用する。

最新バージョンをpullしてくると origin ブランチでは、
若干変更の加わったパッチが入る。

整合性がとれるとはかぎらないため、コンフリクト。

コンフリクトがおきなかったとしても履歴にマージが残る。

git pull --rebase すると、おそらくマージが残らないが、
コンフリクトの解消は必要?

\subsection{マージ・コンフリクトの解消方法}

\subsubsection{rebase して履歴をきれいにする}

git rebase -i origin 
すると、同じパッチだったということで解消される?
これは同じコミットログの場合だけか?

git rebase -i origin
 すると、同じパッチを二度適用しようとしているということでパッ
チが解消されることになる?




\subsubsection{作業の仕方を変える}

提出用のブランチを作成して、そこで提出用のデータを作成してしまえばよい?


\begin{commandline}
 
$ git checkout -b preworkXXXX origin
$ # ... work work work
$ git format-patch ... 

$ git checkout master 
$ git pull
$ git checkout -b preworkYYYY origin
\end{commandline}

preworkXXXX ブランチを毎回捨てる。

\subsection{リポジトリ管理者側の課題}

マージするのが面倒。

git am がコンフリクトを起こす確率が大きい。
パッチが置き換えでなく、元のデータに対しての追加のみになるように問題を設
定すると負荷は減る。
現状はマージで回避してみている。

\begin{commandline}
  git checkout -b マージ用のブランチ master
  git am -3 パッチ
  git checkout -b マージ用のブランチ master
  git am -3 パッチ
  git checkout master 
  git merge マージ用のブランチ
  コンフリクトの解消
  git merge マージ用のブランチ
\end{commandline}

ただ、10人以上の事前課題のハンドリングには時間もかかるので毎回したい作業
ではない。

自動でコンフリクトするかしないかについては判定できるし、その結果がビルド
するかはチェックできるのであれば、なんらかのデーモンを立ち上げることはできないか?


\clearpage

%\printindex

\cleartooddpage

\vspace*{15cm}
\hrule
\vspace{2mm}
\includegraphics[width=2cm]{image200502/openlogo-nd.eps}
\noindent \Large \bf Debian 勉強会資料\\ \\
\noindent \normalfont \debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日 \hspace{5mm}  初版第1刷発行\\
\noindent \normalfont 東京エリア Debian 勉強会 （編集・印刷・発行）\\
\hrule


\end{document}
