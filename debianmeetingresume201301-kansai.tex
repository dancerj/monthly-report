%; whizzy chapter
% -initex iniptex -latex platex -format platex -bibtex jbibtex -fmt fmt
% 以上 whizzytex を使用する場合の設定。

%     Kansai Debian Meeting resources
%     Copyright (C) 2007 Takaya Yamashita
%     Thank you for Tokyo Debian Meeting resources

%     This program is free software; you can redistribute it and/or modify
%     it under the terms of the GNU General Public License as published by
%     the Free Software Foundation; either version 2 of the License, or
%     (at your option) any later version.

%     This program is distributed in the hope that it will be useful,
%     but WITHOUT ANY WARRANTY; without even the implied warranty of
%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%     GNU General Public License for more details.

%     You should have received a copy of the GNU General Public License
%     along with this program; if not, write to the Free Software
%     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA

%  preview (shell-command (concat "evince " (replace-regexp-in-string "tex$" "pdf"(buffer-file-name)) "&"))
% 画像ファイルを処理するためにはebbを利用してboundingboxを作成。
%(shell-command "cd image200708; ebb *.png")

%%ここからヘッダ開始。

\documentclass[mingoth,a4paper]{jsarticle}
\usepackage{kansaimonthlyreport}
\usepackage[dvips]{xy}
\usepackage{ulem}

% 日付を定義する、毎月変わります。
\newcommand{\debmtgyear}{2013}
\newcommand{\debmtgdate}{27}
\newcommand{\debmtgmonth}{1}
\newcommand{\debmtgnumber}{68}

\begin{document}

\begin{titlepage}

% 毎月変更する部分、本文の末尾も修正することをわすれずに

 第\debmtgnumber{}回 関西 Debian 勉強会資料

\vspace{2cm}

\begin{center}
\includegraphics{image200802/kansaidebianlogo.png}
\end{center}

\begin{flushright}
\hfill{}関西 Debian 勉強会担当者 佐々木・倉敷・のがた・かわだ \\
\hfill{}\debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日
\end{flushright}

\thispagestyle{empty}
\end{titlepage}

\dancersection{Introduction}{Debian JP}

\vspace{1em}

 関西Debian勉強会はDebian GNU/Linuxのさまざまなトピック
 (新しいパッケージ、Debian特有の機能の仕組、Debian界隈で起こった出来事、
 などなど）について話し合う会です。

 目的として次の三つを考えています。
 \begin{itemize}
  \item MLや掲示板ではなく、直接顔を合わせる事での情報交換の促進
  \item 定期的に集まれる場所
  \item 資料の作成
 \end{itemize}

 それでは、楽しい一時をお楽しみ下さい。

\newpage

\begin{minipage}[b]{0.2\hsize}
 {\rotatebox{90}{\fontsize{80}{80}
{\gt 関西 Debian 勉強会}}}
\end{minipage}
\begin{minipage}[b]{0.8\hsize}
\hrule
\vspace{2mm}
\hrule
\setcounter{tocdepth}{1}
\tableofcontents
\vspace{2mm}
\hrule
\end{minipage}

\dancersection{最近のDebian関係のイベント報告}{Debian JP}

\subsection{第 67 回関西 Debian 勉強会}

67 回目の関西 Debian 勉強会は 12 月 23 日に福島区民センターで行ないました。

「Android 端末（Asus Transformer TF201）への Debian インストール奮闘記」と
「月刊 Debian Policy パッケージ管理スクリプトとインストール手順」、「2012年の振り返りと2013年の企画」といった内容でした。

Android で実用できる Debian 環境が構築されていましたが、その後も気になるところです。unstable 環境にアップグレードできたのでしょうか。

月刊 Debian Policy は一年でようやく半分終わって、残りは重たい内容ばかりになってきました。
残り今年も続けていきましょう。Policy 読んでみたい方お待ちしております。

2013年の企画もお待ちしていますよ。


\subsection{第 96 回東京エリア Debian 勉強会}
96 回目の東京エリア Debian 勉強会は 1 月 16 日にスクウェア・エニックスで開催されました。

「Debian予約システムアンケート集計」、「gdbのpython拡張（その1)」「月刊Debhelper」といった内容でした。

Debian 予約システムのアンケート機能のフィードバックから、未回答のアンケートへのリンクが登録一覧のところに表示されるようになりましたので確認してみてください。

予約システムへの要望があれば言ってみると反映されていくかもしれませんよ。


\subsection{福岡 Debian 勉強会 2 回目}
2 回目の福岡 Debian 勉強会が 1 月 26 日に開催されました。
「Debianに片足も両足も突っ込んだ皆さん、こんにちは（仮）」、「d-i usbメモリの作り方 or wheezyについて何か（仮）」といった内容でした。

福岡での Debian 勉強会も根付いてきたようです。各地で Debian 勉強会が開催されていくといいですね.


\dancersection{事前課題}{Debian JP}

今回は以下の課題を出題しました.
\begin{screen}
  \begin{enumerate}
  \item 2015年ではDebianはどうなっているかを大胆に予想してください。
  \item これまでDebianでどんなCMSやWebアプリフレームワークを使ったことがありますか？
  \item 本来、Debianではパッケージが提供されているならば、それを使うのが望ましいですが、あえてDebianのパッケージを使わなかった事はありますか？
  \item Drupalの標準ファイル配置は /var/www以下のドキュメントルートにすべてのファイルを一括配置します。
    http://drupalcode.org/project/drupal.git/tree/2c99f0b21755c34cffd4fc5b38161d64bd69ca8a 
    Debianパッケージの場合はどう変化するか説明してください。
    どのコマンドを使えば調べられるでしょうか。
  \item 可能であれば以下のVMを動かしてみてください。（Drupalコアと重要モジュールが入った状態になっています）
    Drupal 7 - Content Management Framework
  \end{enumerate}
\end{screen}

参加者の皆さんの解答は以下の通りです。
\begin{multicols}{2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 二段組ここから
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{prework}{ 名前 }
  \begin{enumerate}
  \item 回答.1
  \item 回答.2
  \end{enumerate}
\end{prework}\vfill

\begin{prework}{ 名前 }
  \begin{enumerate}
  \item 回答.1
  \item 回答.2
  \end{enumerate}
\end{prework}\vfill

\end{multicols}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 二段組ここまで
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\clearpage

\dancersection{Using Drupal on Debian}{紀野}

\dancersection{月刊 Debian Policy 「オペレーティングシステム」その1}{担当：のがた}

月刊Debian Policyの出番がとうとうやってきてしまった。ということで第9章
「オペレーティングシステム」についての解説をします。第9章は最新版
(3.9.4.0)と日本語訳版(3.9.1.0)の間で大きな改変がないので、変更された点
を中心に解説します。

\subsection{第9章の内容について}

第9章では、Debianのオペレーティングシステムとしての構成についてのポリシー
が述べられています。

解説されている範囲は以下のように、幅広い範囲になります。

\begin{itemize}
\item
  ファイルシステムの階層構造
\item
  ユーザーとグループ
\item
  システムランレベルとinit.dスクリプト
\item
  init.dスクリプトからのコンソールメッセージ
\item
  Cronジョブ
\item
  メニュー
\item
  マルチメディアハンドラ
\item
  キーボードの設定
\item
  環境変数
\item
  doc-baseを用いた文書の登録
\item
  代替initシステム
\end{itemize}


\subsection{最新の原文(3.9.4.0)と日本語訳版(3.9.1.0)との違い}

大きな変更点は2つです。

一つは新設された/runディレクトリの扱いについて(9.1.1「ファイルシステム
構造」の例外7と9.1.4「/runと/run/lock」)。もう一つは、SysVInitの代替
Initシステム(upstart)の扱いについて(9.11「代替initシステム」)この2つの
記述が追加されました。

細かな変更では、GNU Hurdのディレクトリ配置についての例外(9.1.1「ファイ
ルシステム構造」の例外9)と、Cronジョブのファイル名について(9.5.1「Cron
ジョブのファイル名」)が追加されました。

その他には細かな修正が入っていますが、これらの追加修正以外は日本語訳版
とほぼ変わりはないので、9章を読む場合は日本語訳を参考にしつつ原文をあた
ると読みやすいと思います。(筆者もDiffを参考にしつつ読みました。)

\subsection{9.1 ファイルシステムの階層構造}

ファイルシステムの階層構造の解説です。ここでは、インストールされるファ
イルやディレクトリについての扱いについて解説しています。

\subsubsection{9.1.1 ファイルシステム構造}

Debianのファイル \footnote{日本語訳版では、すべてのインストールされたファ
イル(all installed files)となっていますが、最新版では、すべてのファイル
(all files)に改められてます。}やディレクトリ配置は、9章以外で決められてい
るポリシーと、この節で述べられる例外を除き、File Filesystem　Hierarchy
Standard(FHS)バージョン 2.3に従います。

\begin{enumerate}
\item 「ユーザー固有のアプリケーション設定ファイルをユーザーディレクトリ
      に置く」というオプショナルルールは緩和されました。設定ファイル名は
      「.」(ドット)から始めることを推奨(ドットファイル)し、複数の設定ファ
      イルを作成する場合は、一つの「.」(ドット)から始まる名前のディレクト
      リを作成しその下に設定ファイルを作成します。この場合の設定ファイル
      は「.」から始めないことを推奨します。
\item 「and64の64ビットバイナリは/lib64を使わなければいけない」という制限
      は廃止されました。

\item 「オブジェクトファイル、内部バイナリ、ライブラリ(libc.so.*を含む)は、
      /lib\{,32\}または/usr/lib\{,32\}以下に置く」という制限は改正され、
      /lib/tripletや/usr/lib/tripletに置くことも許可されました。tripletは、
      インストールするパッケージのアーキテクチャでdpkg-architecture
      -qDEB\_HOST\_MULTIARCH \footnote{日本語訳版では「dpkg-architecture
      -qDEB\_HOST\_GNU\_TYPE」でしたが変更されています。}が返す値です。パッ
      ケージは、パッケージアーキテクチャに適合しないtripletパスにファイル
      をインストールできません。例えばArchitecture: amd64パッケージに32ビッ
      トx86ライブラリが含まれている場合、それらのライブラリを
      /usr/lib/i386-linux-gnu \footnote{日本語訳版では
      「/usr/lib/i486-linux-gnu」でしたが変更されています。} にインストー
      ルできません。アプリケーションは/usr/lib/triplet以下に一つサブディ
      レクトリを作成して使えます。実行時、リンカ/ローダー,ld*は、引き続き
      /libまたは/lib64以下の既存の場所に置き、利用できることが必須になっ
      ています。これはELF ABIの一部であるためです。

\item /usr/local/share/manと/usr/local/manを同じとみなす」という制限は推
      奨に緩和されました。
\item「ウィンドウマネージャはsystem.*wmrcという一つの設定ファイルを持つこ
      と」「ウィンドウマネージャのサブディレクトリ名はウィンドウマネージャ
      と同じにしなければいけない」という制限は撤廃されました。
\item 「ブートマネージャの設定は/etcに置く、もしくはシムリンクを張る」と
      いう制限は推奨に緩和されました。
\item (追加) ルートファイルシステムに/runディレクトリの追加が許可されまし
      た。/var/runが/runに、/var/lockは/run/lockに置き換えられ、後方互換
      のため/var以下のディレクトリはシムリンクに置き換えられました。/run
      と/run/lockは、FHSの/var/run、/var/lockの必要な要件のほかに、ファイ
      ル命名規則、ファイル形式の要件、ブート時にファイルが消去されるといっ
      た要件、全てに従わなければいけません。/runにあるファイルおよびディ
      レクトリは、テンポラリファイルシステムに保存されなければいけません。
\item ルートファイルシステムに/sysと/selinuxディレクトリを置くことが許可されました。
\item (追加) GNU Hurdシステムにおいて、ルートファイルシステムに/hurdと
      /serversディレクトリを追加することが許可されました。
\end{enumerate}

FHSはdebian-policyパッケージに同梱されているほか、FHSのWebサイト
\footnote{http://www.pathname.com/fhs/} で確認できます。

\subsubsection{9.1.2 サイトごとのプログラム}

通常、パッケージはFHSに従うため/usr/localにファイルを置いてはいけません。
しかし、システム管理者にサイト固有のファイルを置く場所を示すため空ディ
レクトリを作成することだけは許可されています。

作成場所は/usr/local直下ではなく一段下(/usr/local/*/dir)に作成すること。
/usr/local直下に作成するディレクトリは、FHSセクション4.5 \footnote{FHSセ
クション4.5を調べるとなかったのだけど、FHSの章立てが狂ってるような気がす
る。
\url{http://www.debian.org/doc/packaging-manuals/fhs/fhs-2.3.html\#USRLOCALLOCALHIERARCHY}}
に書かれたもの以外作成しないこと、また、FHSセクション4.5で列挙されている
ディレクトリは削除してはいけません。パッケージを削除する際は、空であれば
作成したディレクトリは削除すること。

例ではemacsen-commonパッケージが/usr/local/share/emacsディレクトリを利
用している例が挙げられています。

\subsubsection{9.1.3 システムの使うメールディレクトリ}

システムが使うメールディレクトリは/var/mailです。特定のメールエージェン
トだけが使ってはいけませんし、以前使われていた/var/spool/mailは、物理的
にあっても使用するべきではありません。

\subsubsection{9.1.4 /runと/run/lock}

(追加)

/runディレクトリは、通常テンポラリファイルシステムにマウントされ、起動
時には消去されます。

Packages therefore must not assume that any files or directories under
/run other than /run/lock exist unless the package has arranged to
create those files or directories since the last reboot.
Normally, this is done by the package via an init script.
See Writing the scripts, Section 9.3.2 for more information.

(すみません。/run、/run/lockはinitスクリプトがテンポラリ上に作成するので、
パッケージはその下にファイルが存在すると仮定してはいけないという意味だと
思うのですが、うまく訳せませんでした…。)

パッケージには、/runまたは/var/run、/var/lockのパスにあるファイルやディ
レクトリを含めることはできません。/var/run、/var/lockのパスは通常シムリ
ンクか、/runの後方互換性のためリダイレクトされます。

\subsection{9.2 ユーザーとグループ}

\subsubsection{9.2.1 はじめに}

Debianでは平文パスワードもしくはシャドウパスワードの設定ができます。

一部のユーザーID(UID)とグループID(GID)は、特定のパッケージのためグロー
バルに予約されています。いくつかのパッケージでは、ユーザーやグループ所
有のファイルを含めたり、バイナリコンパイル時に使う必要があるので、
Debianシステムではこれらの目的のための使用をします。これは重大な制限で
ローカルの管理ポリシーとぶつからないようにしてください。多くのサイトで
はローカルのユーザー・グループを割り当てている事が多いので注意してくだ
さい。

これとは別に動的に割り当てられるIDがあります。デフォルトでは適切な順序
で割り当てられますが、設定で変更できます。

base-passwd以外のパッケージは/etc/passwd, /etc/shadow, /etc/group,
/etc/gshadowを変更してはいけません。

\subsubsection{9.2.2 UIDとGIDの割り当て}

UIDとGIDの割り当てです。

\begin{description}
\item[0-99]
Debianプロジェクトが使いDebianシステム共通に割り当てられます。
\item[100-999]
システム用に動的に割り当てられます。
\item[1000-59999]
ユーザーアカウントが動的に割り当てられます。
\item[60000-64999]
Debianプロジェクトが共通に割り当てますが、必要に応じて作成されます。
\item[65000-65533]
予約済み
\item[65534]
nobodyユーザー。対応するgidとしてnogroupグループを割り当てます。
\item[65535]
(uid\_t)(-1) ==
(gid\_t)(-1)は利用しないでください。エラーの戻り値として利用します。
\end{description}

\subsection{続きは\ldots{}}

init.dスクリプトなどに続きますが、続きはまた来月!お楽しみに!

\clearpage

\dancersection{今後の予定}{Debian JP}

\subsection{関西 Debian 勉強会}

次回、第 69 回関西 Debian 勉強会は 2 月 24 日(日)に GREE 大阪スタジオで行ないます。

\subsection{東京エリア Debian 勉強会}
2 月 9 日(土)に OSC 浜松に出展します。
また、2 月 22 日(金)、23 日(土)の OSC Tokyo/Spring にも出展し、野島さんがセッションします。


% 冊子にするために、4の倍数にする必要がある。
% そのための調整
%% \dancersection{メモ}{}
%% \mbox{}\newpage
%% \mbox{}\newpage

\printindex
 \cleartooddpage

 \begin{minipage}[b]{0.2\hsize}
  \rotatebox{90}{\fontsize{80}{80} {\gt 関西 Debian 勉強会} }
 \end{minipage}
 \begin{minipage}[b]{0.8\hsize}

 \vspace*{15cm}
 \rule{\hsize}{1mm}
 \vspace{2mm}
 \includegraphics[width=2cm]{image200502/openlogo-nd.eps}
 \noindent \Large \bf Debian 勉強会資料\\ \\
 \noindent \normalfont \debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日 \hspace{5mm}  初版第1刷発行\\
 \noindent \normalfont 関西 Debian 勉強会 （編集・印刷・発行）\\
 \rule{\hsize}{1mm}
 \end{minipage}

\end{document}
