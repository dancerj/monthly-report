%; whizzy chapter
% -initex iniptex -latex platex -format platex -bibtex jbibtex -fmt fmt
% 以上 whizzytex を使用する場合の設定。

%     Tokyo Debian Meeting resources
%     Copyright (C) 2010 Junichi Uekaw
%     Copyright (C) 2010 Nobuhiro Iwamatsu

%     This program is free software; you can redistribute it and/or modify
%     it under the terms of the GNU General Public License as published by
%     the Free Software Foundation; either version 2 of the License, or
%     (at your option) any later version.

%     This program is distributed in the hope that it will be useful,
%     but WITHOUT ANY WARRANTY; without even the implied warranty of
%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%     GNU General Public License for more details.

%     You should have received a copy of the GNU General Public License
%     along with this program; if not, write to the Free Software
%     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA

%  preview (shell-command (concat "evince " (replace-regexp-in-string "tex$" "pdf"(buffer-file-name)) "&"))
% 画像ファイルを処理するためにはebbを利用してboundingboxを作成。
%(shell-command "cd image201002; ebb *.png")

%%ここからヘッダ開始。

\documentclass[mingoth,a4paper]{jsarticle}
\usepackage{monthlyreport}
\usepackage{wrapfig}

% 日付を定義する、毎月変わります。
\newcommand{\debmtgyear}{2010}
\newcommand{\debmtgmonth}{4}
\newcommand{\debmtgdate}{17}
\newcommand{\debmtgnumber}{63}

\begin{document}

\begin{titlepage}
\thispagestyle{empty}

% タイトルページ:編集必要な部分は最初のマクロに飛ばすこと

\vspace*{-2cm}
第\debmtgnumber{}回 東京エリア Debian 勉強会資料

\hspace*{-2.4cm}
\includegraphics[width=210mm]{image200801/2008title.eps}\\
\hfill{}\debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日

\end{titlepage}

\dancersection{Introduction}{上川 純一}

\begin{multicols}{2}
 
 
 今月のDebian勉強会へようこそ。これからDebianの世界にあしを踏み入れると
 いう方も、すでにどっぷりとつかっているという方も、月に一回Debianについ
 て語りませんか？

 Debian勉強会の目的は下記です。

 \begin{itemize}
 \item \underline{Debian Developer} (開発者)の育成。
 \item 日本語での「\underline{開発に関する情報}」を整理してまとめ、アップデートする。
 \item \underline{場}の提供。
 \begin{itemize}
  \item 普段ばらばらな場所にいる人々が face-to-face で出会える場を提供
	する。
  \item Debian のためになることを語る場を提供する。
  \item Debianについて語る場を提供する。
 \end{itemize}
 \end{itemize}		

 Debianの勉強会ということで究極的には参加者全員がDebian Packageをがりがり
 と作るスーパーハッカーになった姿を妄想しています。情報の共有・活用を通し
 て Debianの今後の能動的な展開への土台として、「場」としての空間を提供す
 るのが目的です。

\end{multicols}

\newpage

\begin{minipage}[b]{0.2\hsize}
 \definecolor{titleback}{gray}{0.9}
 \colorbox{titleback}{\rotatebox{90}{\fontsize{80}{80} {\gt デビアン勉強会} }}
\end{minipage}
\begin{minipage}[b]{0.8\hsize}
\hrule
\vspace{2mm}
\hrule
\tableofcontents
\vspace{2mm}
\hrule
\end{minipage}

\dancersection{事前課題}{上川 純一}

今回の事前課題は以下です:

\begin{enumerate}
 \item xxxx
\end{enumerate}

この課題に対して提出いただいた内容は以下です。

% \input{image201003/prework.tex}

\dancersection{最近のDebian関連のミーティング報告}{前田耕平}
\subsection{東京エリアDebian勉強会62回目報告}
% (query-replace-regexp "<.*?>" "")
% (query-replace-regexp "^[	 ]\+" "")

2010年3月の東京エリアDebian勉強会、
参加者は山本さん、日比野さん、岩松信洋さん、吉野与志仁さん、
本庄さん、henrich さん、あけどさん、前田耕平さん、荒木(靖)さん、
吉田@小江戸さん、中尾さん、上川の12人でした。

本庄さんがニューラルネットワークを使って書籍スキャンを便利にしてみた話。
次回はlibsvmとlibsaneを使っていろいろ拡張するそうです。

前田さんが weka を使ってみて、今月の生活費を予測した内容でした。
回帰分析の結果とか、おもしろすぎです。

上川がlibfftw と libsndfile を使ってみた話をしました。

日比野さんが、日本語 man がうまく表示されない件について発表してくれました。
groffの深みについて語り合う会です。
dvi サポートとかを考えるとめんどくさすぎですが、どうしたものか。

吉野さんが、dpkg の新しいソースファイル形式、
3.0 quilt について紹介してくれました。

宴会は銀座ライオン。

%\dancersection{libsane 入門}{本庄}
%\dancersection{debhelper v7 でのパッケージ管理}{誰か}
%\dancersection{死屍累々のundefoma 、その後は?}{誰か}
\dancersection{piuparts の使い方}{岩松}

\subsection{はじめに}
piuparts は 次期リリース squeeze の目標の一つに挙げられている
\texttt{Package clean install/uninstall}を達成するためのサポートツールです。
既に構築されたDebianパッケージのインストール、アンインストール、アップグ
レードのチェック
を行います。
通常、パッケージ構築時の依存関係チェックや実際の構築には\texttt{pbuilder/cowbuilder}を使
います。パッケージのインストール、動作確認までは行いますが、アンインストー
ルまでの確認を行っているパッケージメンテナは少ないようで（実際にそのまま
使う人が多いためと考えられる）、アンインストールできない事が稀にありまし
た。最悪の場合、パッケージを作ってテストせずにアップーロードしてしまう事
もあるようです。また、stable からのアップグレードチェックもパッケージメ
ンテナはあまりやってないのではないでしょうか。
このような問題をチェックするためのツールとして\texttt{piuparts}は作られました。
では、\texttt{piuparts}をどのように使うのか見ていきましょう。

\subsection{piupartsの使い方}

基本的な使い方は以下のように実行します。
\texttt{piuparts}コマンドにチェックしたいパッケージを指定します。

\begin{commandline}
$ piuparts ../foo_1.0-2_i386.deb
\end{commandline}


\texttt{-d} ディストリビューションを指定します。複数のディストリビューションをチェック
 したい場合には、 \texttt{-d} を並べます。

-dev.deb のチェックはどうなるのか。



\subsection{piupartsの動き}

\subsection{ログの見方}
\subsubsection{問題ない場合}
\subsubsection{エラーがある場合}

\subsection{細かい設定}

\subsection{QAチームからのサポート}
piupartsがパッケージとして用意されたとしても、まだ利用しているパッケージ
メンテナは少ないようです。そこで、QAチームは既にDebianにインストールされ
たパッケージをチェックするためのサービス\texttt{piuparts.debian.org}を立
ち上げました。
これでチェックされた内容は、\texttt{qa.debian.org}で提供されている情報の
一部として、表示されています。

\subsection{問題点}
依存しているパッケージが悪いのに、それが自分のパッケージにも出てくる件。

\subsection{その他}
現在、　v2 を開発中。
\url{http://code.liw.fi/piuparts2/bzr/trunk/}


\dancersection{upstart 再入門}{前田耕平}

\subsection{はじめに}
今年の2月の Debian 勉強会（Debian 温泉）で一度扱ったテーマですが、新年度
も始まり、新入生、新入社員、新入 Debian 開発者予備軍の皆さんも、気分も新
たにもう一回おさらいして、いずれやってくるであろう、Squeeze のリリースに
備えましょう。

重要ポイントは2月の資料から再掲しますが、upstart が導入されることになっ
た背景や概要などは2010年2月の Debian 勉強会の資料「ブート方法が変
わるよ」を参照ください。

\subsection{従来の init}

rcS

\begin{figure}[H]
\caption{init, rcSの処理}
\begin{center}
%\includegraphics[height=0.5\hsize]{image201002/sysvinit.eps}
\end{center}
\end{figure}

\subsection{カーネルイベントをどう扱うか}

\begin{figure}[h]
\begin{center}
\caption{upstart 状態遷移}
\includegraphics[height=0.7\hsize]{image201002/states.eps}
\end{center}
\end{figure}


カーネルがモジュールをロード完了したら udev / hal 経由で notification ?
upstart がそれをlistenしている?
どうイベント駆動にしているか。

なぜそちらが速いのか。

複雑な依存関係: ネットワークスワップデバイス、LVM上のファイルデバイス、
NFS (/etc/fstab でのマウント順序の指定) などなどに対応するための幾多の苦
難をどうupstart は解決したか。


%-------------------------------------------------------------------------------
\dancersection{debtags 入門}{やまねひでき}
%-------------------------------------------------------------------------------
\index{debtags}
\subsection{概要}
今日ここでは、「debtags 便利だぜ！」というのと
「もっと便利にするためにオラに元気を分けてくれ！」というのを説明します。

\subsubsection{探し物は何ですか?}
Debian には大量のパッケージが用意されていますが、
最初から全てがインストールされているわけではないので、必要に応じて導入を行います。
で、必要なパッケージがわかっているのならば良いですがそうでない場合も度々です。
その場合にはパッケージの検索を行ってパッケージを見つけてインストールという流れになります。

欲しいファイル・機能を思いつく
→
適当なキーワードで検索
→
見つけたパッケージをインストール

これが多くの Debian ユーザが一般的に行っている流れではないかと思います。

\subsubsection{見つけにくいモノですか?}

通常の apt-cache/aptitude/synaptic の検索 (search オプション) では、
単純なキーワードマッチ検索を行います。
しかし、キーワードにマッチするパッケージが少ない場合はともかく、
大量にマッチしてしまう一般的なキーワードしか思いつかない場合は、
ノイズ混じりの検索結果になって一苦労します。

例えば、ウェブブラウザを普段使っているものから変更したいと思ってパッケージを探してみましょう。

\begin{commandline}
$ apt-cache search web browser| wc -l
295
\end{commandline}

いくら Debian にはパッケージが多いといってもこれは多すぎですね。
その中身をちょっと見てみると…？

\begin{commandline}
<snip>
tor - anonymizing overlay network for TCP
torrentflux - web based, feature-rich BitTorrent download manager
trac-graphviz - Graphs printing plugin for Trac
unhtml - Remove the markup tags from an HTML file
uzbl - Lightweight Webkit browser following the UNIX philosophy
vdetelweb - Telnet and Web interface for VDE 2.x
iceweasel-vimperator - Iceweasel extension to make it have vim look and feel.
<snip>
wwwoffle - World Wide Web OFFline Explorer
xdg-utils - desktop integration utilities from freedesktop.org
xemacs21-bin - highly customizable text editor -- support binaries
xemacs21-gnome-mule-canna-wnn - highly customizable text editor -- transitional package
xemacs21-gnome-mule - highly customizable text editor -- transitional package
xemacs21-gnome-nomule - highly customizable text editor -- transitional package
xemacs21-mule-canna-wnn - highly customizable text editor -- Mule binary compiled with Canna and Wnn
xemacs21-mule - highly customizable text editor -- Mule binary
xemacs21-nomule - highly customizable text editor -- Non-mule binary
xemacs21-support - highly customizable text editor -- architecture independent support files
xemacs21-supportel - highly customizable text editor -- non-required library files
xemacs21 - highly customizable text editor
<snip>
\end{commandline}

ネット接続の匿名化ツールである tor やブラウザのプラグインである iceweasel-vimperator、
さらには xemacs21 のパッケージ群までもが検索一覧に含まれてしまっています。
これは期待している「ウェブブラウザ」の検索結果ではありません。

ではどうすれば効率的にできるのか？そこで debtags ですよ。

\subsection{debtags を導入してつかってみよう}
では早速 debtags を導入してみましょう。
\begin{commandline}
$ sudo aptitude install debtags
\end{commandline}
これだけです。簡単ですね。では実際の検索を。

\begin{commandline}
$ sudo debtags update
$ debtags search web::browser
arora - simple cross platform web browser
chimera2 - Web browser for X
conkeror - keyboard focused web browser with Emacs look and feel
dillo - Small and fast web browser
edbrowse - A /bin/ed-alike webbrowser written in C
elinks - advanced text-mode WWW browser
elinks-lite - advanced text-mode WWW browser - lightweight version
epiphany-browser - Intuitive GNOME web browser
epiphany-extensions - Extensions for Epiphany web browser
epiphany-gecko - Dummy, transitional package
epiphany-webkit - Dummy, transitional package
ezmlm-browse - Web browser for ezmlm-idx archives
galeon - GNOME web browser for advanced users
galeon-common - data for the galeon web browser
iceape-browser - Iceape Navigator (Internet browser) and Composer
iceweasel - Web browser based on Firefox
(snip)
w3m - WWW browsable pager with excellent tables/frames support
w3m-el - simple Emacs interface of w3m
w3m-el-snapshot - simple Emacs interface of w3m (development version)
w3m-img - inline image extension support utilities for w3m
wapua - Web browser for WAP WML pages
\end{commandline}

先ほどよりはずっとまともな情報が検索できるようになっています。
キーワードの組み合わせ方が思いつかないという方も、auto complete があるので安心です。

\begin{commandline}
$ debtags search web(タブキーで補完)
$ debtags search web\:\:(さらにタブキーで補完)
web::TODO           web::browser        web::forum          web::server
web::application    web::cgi            web::portal         web::wiki
web::appserver      web::cms            web::scripting
web::blog           web::commerce       web::search-engine
\end{commandline}

さらに複数のキーワードを組み合わせての検索もお手の物です。
'' でくくって \&\& で組み合わせるだけです。

\begin{commandline}
~$ debtags search 'web::browser && x11::application'
arora - simple cross platform web browser
chimera2 - Web browser for X
conkeror - keyboard focused web browser with Emacs look and feel
dillo - Small and fast web browser
epiphany-browser - Intuitive GNOME web browser
epiphany-extensions - Extensions for Epiphany web browser
epiphany-gecko - Dummy, transitional package
epiphany-webkit - Dummy, transitional package
galeon - GNOME web browser for advanced users
galeon-common - data for the galeon web browser
iceape-browser - Iceape Navigator (Internet browser) and Composer
iceweasel - Web browser based on Firefox
junior-internet - Debian Jr. Internet tools
kazehakase - GTK+-based web browser that allows pluggable rendering engines
konq-plugins - plugins for Konqueror, the KDE file/web/doc browser
konqueror - KDE 4's advanced file manager, web browser and document viewer
links2 - Web browser running in both graphics and text mode
midori - fast, lightweight graphical web browser
netsurf-gtk - Small portable web browser with CSS and Unicode support - GTK version
w3m-el-snapshot - simple Emacs interface of w3m (development version)
wapua - Web browser for WAP WML pages
\end{commandline}

これで「X 上のウェブブラウザっていったらどんなのがあるの？」が検索できました。
他に役立ちそうな例としては「rubyのDebパッケージ開発環境を整えたい」などはいかがでしょう？

\begin{commandline}
$ debtags search 'devel::lang:ruby && devel::packaging'
dpkg-ruby - ruby interface for dpkg
ruby-pkg-tools - Tools for building Debian Ruby packages
rubygems1.8 - package management framework for Ruby libraries/applications
\end{commandline}

便利さがいまいちわからない場合は、同じ検索を apt-cache/aptitude で行ってみてください。
debtags rocks!

おまけ
\begin{commandline}
$ debtags search 'devel::lang:lisp && devel::packaging'
common-lisp-controller - Common Lisp source and compiler manager
dh-lisp - Debhelper to support Common Lisp related packages
$ 
$ debtags search 'devel::lang:haskell && devel::packaging'
haskell-devscripts - Tools to help Debian developers build Haskell packages
libhugs-cabal-bundled - A framework for packaging Haskell software
libhugs-quickcheck-bundled - Automatic testing of Haskell programs
$ 
$ debtags search 'devel::lang:ocaml && devel::packaging'
$ 
\end{commandline}

\subsection{で、debtags というのは何ぞや?}

Enrico Ziniさんによって開発された「パッケージごとに予めリストアップしてある
『カテゴリタグ』をつけておき、後々検索しやすくしよう」という取り組みです。
ウェブサイトを見ると、どうやらランガナータンの図書コロン分類法からヒントを得て作ったようです
＆ポイントは複数のタグが付けられるところ。

任意のパッケージに対してタグをつけまくる
→
タグ情報が…どうなる？？？（要確認）
→
debtags パッケージのインストール、debtags search で検索
→
ウマー

となります。すばらしいですね。しかし、最初にタグをつけまくらないと検索しても引っかかりません。
ということで、これからタグ付けのお時間です。
現在、タグ付けされているパッケージとそうでないパッケージはどの程度あるのでしょうか？

\begin{commandline}
$ debtags stats
Total count of packages: 38476
Total count of packages (according to APT): 38476
Total count of packages (according to Debtags): 22816
Number of facets: 31
Number of tags: 583
Number of packages with tags, but no special::not-yet-tagged tags: 22816 (100.0%)
Number of packages with special::not-yet-tagged tags: 0 (0.0%)
Number of packages with only special::not-yet-tagged tags: 0 (0.0%)
Number of packages with no tags: 0 (0.0%)
\end{commandline}

やりがいがありますね！

\subsection{どうやってタグを付けるの？}

タグをつけるには3種類のやり方があります
\begin{itemize}
 \item CLI (debtags tag)
 \item GUI (debtags-edit)
 \item web インターフェイス
\end{itemize}

このうち、一番取っ付き易いと思われるのは web インターフェイスなので、こちらの説明を中心に行います。


\subsubsection{パッケージメンテナの人向け}

\url{http://debtags.alioth.debian.org/todo.html?maint=<your_mail_address>} にアクセスしてください。
メンテナンスしているパッケージとつけられているタグの一覧が表示されます。
自分のパッケージをいい状態にメンテナンスする作業の一環ですよ！忘れないで。

\subsubsection{ユーザの方向け}

debtags のサイト (\url{http://debtags.alioth.debian.org/todo.html}) にアクセス、
Current View を full text search にして自分が良く使っているパッケージの名前を入れます。
特に debtags grep で検索してみて「このパッケージが何でこのキーワードで引っかからないんだ！」
というのがあれば、それは要改善点なわけなので入力してみるのが良いでしょう。

\subsection{実際のタグ付け}

適当なパッケージを選んだらタグ付けに入りましょう。サイトの画面は大きく４つに分けられます。

！！！！画面キャプチャ


選択したパッケージの説明
利用可能なタグの区別：all（すべて）/ suggested （おすすめ）/ search （検索）
タグの一覧
既に付けられた・付けられるタグ

\subsection{修正が必要なタグ}

まだキチンとタグ付けがされていないパッケージには、赤い×印と共に以下のような注意が表示されます。
ここからまず直していくことを考えましょう。

\begin{itemize}
 \item The not-yet-tagged tags are still present.
 \item An implemented-in::* tag seems to be missing.
 \item A role::* tag is still missing.
 \item A devel::lang:* tag seems to be missing.
\end{itemize}

それぞれ
The not-yet-tagged tags are still present.
このパッケージはまだタグ付けが終わってないよ、のタグが残ってます。

An implemented-in::* tag seems to be missing.
このソフトはほげほげ言語で実装されています、ってタグ付けしようね

A role::* tag is still missing.
このソフトの役割をタグ付けせよ（role は必須です）

A devel::lang:* tag seems to be missing.
ほげほげ言語開発用のタグを付けましょう


パッケージ名をクリック
提示されるタグや検索したタグをクリックして追加
必要ないタグが付けられている場合はクリックして削除
最後に submit 

これだけで作業は終わりです。簡単ですね！


\subsection{どんなタグがあるの?}

タグ付け自体は簡単なものなので、パッケージに対して適切なタグを付けることが肝要なのですが、
すべてのタグを覚えることは大変すぎるのであきらめて、
サイトが適宜提示してくれるものの中から選択しましょう。
あと一応ガイドラインもあります (\url{http://wiki.debian.org/DebTaggingGuidelines})

で、最初に「推奨」タグが表示されています。適当なものがあればここから選ぶのもいいですが、お勧めは
他の似たパッケージを見てみる→おんなじタグ使う
all を選んで、検索窓からキーワードでタグを検索してみる
です。

\subsection{最後に}
Happy tagging!


%\printindex

\cleartooddpage

\vspace*{15cm}
\hrule
\vspace{2mm}
\includegraphics[width=2cm]{image200502/openlogo-nd.eps}
\noindent \Large \bf Debian 勉強会資料\\ \\
\noindent \normalfont \debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日 \hspace{5mm}  初版第1刷発行\\
\noindent \normalfont 東京エリア Debian 勉強会 （編集・印刷・発行）\\
\hrule

\end{document}
