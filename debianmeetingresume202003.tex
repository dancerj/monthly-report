%; whizzy chapter -dvi
% -initex iniptex -latex platex -format platex -bibtex jbibtex -fmt fmt
% 以上 whizzytex を使用する場合の設定。

%     Tokyo Debian Meeting resources
%     Copyright (C) 2012 Junichi Uekawa
%     Copyright (C) 2011, 2015 Nobuhiro Iwamatsu

%     This program is free software; you can redistribute it and/or modify
%     it under the terms of the GNU General Public License as published by
%     the Free Software Foundation; either version 2 of the License, or
%     (at your option) any later version.

%     This program is distributed in the hope that it will be useful,
%     but WITHOUT ANY WARRANTY; without even the implied warranty of
%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
%     GNU General Public License for more details.

%     You should have received a copy of the GNU General Public License
%     along with this program; if not, write to the Free Software
%     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA

%  preview (shell-command (concat "evince " (replace-regexp-in-string "tex$" "pdf"(buffer-file-name)) "&"))

%%ここからヘッダ開始。

\documentclass[mingoth,a4paper]{jsarticle}
\usepackage{monthlyreport}
% 日付を定義する、毎月変わります。
\newcommand{\debmtgyear}{2020}
\newcommand{\debmtgmonth}{3}
\newcommand{\debmtgdate}{21}
% started from zero:
% (let ((year 2013) (month 7)) (+ (* (- year 2005) 12) month -1))
\newcommand{\debmtgnumber}{183}

% Needed to import pandoc-generated LaTeX documents.
% See https://stackoverflow.com/questions/40438037/tightlist-error-using-pandoc-with-markdown
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% tikz picture の為のマクロ設定
\usepackage[dvipdfmx]{graphicx}
\usepackage{tikz}

\begin{document}

\begin{titlepage}
\thispagestyle{empty}
% タイトルページ:編集必要な部分は最初のマクロに飛ばすこと

\vspace*{-2cm}
第\debmtgnumber{}回 東京エリア Debian 勉強会資料\\
\hspace*{-2cm}
\includegraphics{image2012-natsu/dotdeb.pdf}\\
\hfill{}\debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日

% ここはアップデートすること
% 全角文字にしないとフォントのサイズが合わないので注意
\rotatebox{10}{\fontsize{30}{30} {\gt　ｘｘｘ入門}}\\

\vspace*{-2cm}
\hfill{}\includegraphics[height=6cm]{image200502/openlogo-nd.eps}
\end{titlepage}

\newpage

\begin{minipage}[b]{0.2\hsize}
 \definecolor{titleback}{gray}{0.9}
 \colorbox{titleback}{\rotatebox{90}{\fontsize{80}{80} {\gt デビアン勉強会} }}
\end{minipage}
\begin{minipage}[b]{0.8\hsize}
\hrule
\vspace{2mm}
\hrule
\begin{multicols}{2}
\tableofcontents
\end{multicols}
\vspace{2mm}
\hrule
\end{minipage}

\dancersection{最近のDebian関連のミーティング報告}{杉本典充}

\subsection{2020年1月度 東京エリアDebian勉強会}

2020年1月18日(土)に東京エリアDebian勉強会を開催しました。会場はサイバートラスト株式会社の会議室を借りて行いました。参加者は3名でした。

各自用意した課題に取り組み、Debianに関する動向について情報の共有を行いました。

% 勉強会の後は参加者で懇親を深めました。

\subsection{OSC 2020 Tokyo/Spring}

2020年2月22日(土)に開催するOSC 2020 Tokyo/Spring\footnote{\url{https://www.ospn.jp/osc2020-spring/}}に東京エリアDebian勉強会は参加する予定でした。しかし、新型コロナウイルスが流行しているためイベントは中止となりました。


\dancersection{事前課題}{杉本典充}

今回の事前課題は以下です。

\begin{enumerate}
\item xxxx
\end{enumerate}

%この課題に対して提出いただいた内容は以下です。

\begin{multicols}{2}
{\small
\input{image202003/prework.tex}
}
\end{multicols}

%\dancersection{Debian Trivia Quiz}{username}
%
%Debianの昨今の話題についてのQuizです。
%
%今回の出題範囲は\url{debian-devel-announce@lists.debian.org} や \url{debian-news@lists.debian.org}などに投稿された内容からです。
%
%\begin{multicols}{2}
%\input{image201908/quiz.tex}
%\end{multicols}


% % (query-replace-regexp "<.*?>" "")
% % (query-replace-regexp "^[    ]\+" "")

%-------------------------------------------------------------------------------
\dancersection{動画配信環境をしらべてみた}{上川　純一}
%-------------------------------------------------------------------------------

\subsection{はじめに}

Debian環境でオープンソースツールだけで大人数にレクチャー形式で動画配信す
る仕組みについて検討してみました。目標はオンラインでDebian勉強会を開催す
ることです。

現状のスタイルだと事前資料はあるんですがその場で結構かけあいがあります。
技術的な制約によりとりあえずレクチャー形式で観客はあまり話をしなくてもよ
いと仮定します。発言したい場合は電話するなりテキストチャットするなりして
シグナルしてもらいましょう。

\subsection{配信スタイル}
\subsubsection{単一拠点での配信}

Youtube　Liveで配信すればよいのであればFLV形式でRTMPでYoutubeLiveの指定
されたURLに送信すればよいです。たとえばffmpegで画像をキャプチャーしてエ
ンコードして送信すればよい。ソースはデスクトップのキャプチャーと、マイク
入力とUSB UVC Camera でよいでしょう。

他にもいろいろなサービスがあるのでそれを使えばよいし、別に視聴者の数が多
く期待されないのであればRTMPサーバを立ち上げればよいだけでしょう。

\subsubsection{複数拠点からの配信}

要素としては講師役が複数いるときに切り替えながらやるという場合です。テキ
ストチャットなどを補助ツールとして使いながら拠点映像ソースの切り替えをす
る感じになると思います。

\subsubsection{かけあいがある通信}

勉強会なので参加者が相互に意見を言い合いながら参加する形にしたい。
通常室内ではクイズやってみたりその場で議論してみたりするわけです。

予想としてはレイテンシとノイズが大きいでしょうか。
テキストベースのチャットを補助ツールとして使うのがよいかもしれません。

映像は光が直行するので大丈夫なのですが音はエコーがありま
す。基本はヘッドセットとマイクをつかうのがよいでしょう。

Bluetooth HSPの音質は8KHz 程度でフィルタリングされる聞いたら明らかに昔の
電話みたいな音質になるのでやめておきましょう。

発言しないときはミュートしておきましょう。発言するときには手をあげてタイ
ミングをみはからいましょう。ビデオを通常時はきっておいて必要なときだけオ
ンにするなどを検討してみましょう。

システムの上限に近づいているようであればビデオを切りましょう。


\subsection{ツール}

\subsubsection{nginx rtmpモジュール}

なんか人気みたいなので試してみました。

\begin{commandline}
$ sudo apt install nginx libnginx-mod-rtmp
\end{commandline}
%$ -- make emacs happy

\texttt{/usr/share/doc/libnginx-mod-rtmp/README.md.gz}を眺めた感じだと

\texttt{nginx.conf} に設定をいくつか書くと良いようです。
普通はon\_publishとかで認証するみたい。

\begin{commandline}
rtmp {
  server {
    listen 1935;
    chunk_size 4000;

    # Many publishers, many subscribers
    # no checks, no recording
    application videochat {
      live on;
    }
  }
}
\end{commandline}

設定を反映させるために

\begin{commandline}
$ sudo /etc/init.d/nginx restart
\end{commandline}
%$ -- make emacs happy

これで \url{rtmp://server/videochat/}で接続できるようになります。

\subsubsection{vlc}

VLCは万能なビデオプレイヤーですが、rtmpの再生にも便利です。
配信が動作しているのかを確認するには便利。

\begin{commandline}
$ sudo apt install vlc
$ vlc rtmp://server/videochat/name
\end{commandline}
%$ -- make emacs happy



\subsubsection{OBS Studio}

\begin{commandline}
$ sudo apt install obs-studio
\end{commandline}
%$ -- make emacs happy


%-------------------------------------------------------------------------------
\dancersection{title}{username}
%-------------------------------------------------------------------------------

\subsection{はじめに}

xxx



% 冊子にするために、4の倍数にする必要がある。
% そのための調整
\dancersection{メモ}{}
\mbox{}\newpage

\vspace*{15cm}
\hrule
\vspace{2mm}
\includegraphics[width=2cm]{image200502/openlogo-nd.eps}
\noindent \Large \bf Debian 勉強会資料\\
\noindent \normalfont \debmtgyear{}年\debmtgmonth{}月\debmtgdate{}日 \hspace{5mm}  初版第1刷発行\\
\noindent \normalfont 東京エリア Debian 勉強会 （編集・印刷・発行）\\
\hrule

\end{document}
